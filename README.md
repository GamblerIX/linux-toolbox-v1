# Linux 工具箱 🚀

一个功能强大、易用的Linux系统管理工具集，支持Ubuntu、Debian、CentOS等主流发行版。

**版本**: 2.0 | **许可证**: MIT | **Shell**: Bash | **平台**: Linux

## ✨ 特性

- 🎯 **一键操作** - 简化复杂的系统管理任务
- 🛡️ **安全可靠** - 内置错误处理和配置备份机制
- 🔧 **功能丰富** - 涵盖系统管理、网络安全、性能优化等
- 📱 **交互友好** - 清晰的菜单界面和操作提示
- 🌐 **多系统支持** - 支持Ubuntu、Debian、CentOS 7/8
- 🚀 **性能优化** - 严格模式和错误处理机制

## 🚀 快速开始

### 一键运行（推荐）

```bash
curl -Ls https://raw.githubusercontent.com/GamblerIX/linux-toolbox/main/tool.sh | bash
```

### 下载并运行

```bash
wget https://raw.githubusercontent.com/GamblerIX/linux-toolbox/main/tool.sh
chmod +x tool.sh
./tool.sh
```

### 安装到系统

```bash
# 运行脚本后选择 "工具箱管理" -> "安装/更新工具箱"
# 安装后可直接使用 tool 命令
tool
```

## 📋 系统要求

- **操作系统**: Ubuntu 16.04+, Debian 9+, CentOS 7/8
- **权限**: Root权限（脚本会自动提权）
- **网络**: 互联网连接（用于下载和更新）
- **依赖**: curl 或 wget（通常系统自带）

## 🛠️ 功能模块

### 1. 系统管理工具

#### 🧹 系统清理
- 清理临时文件和缓存
- 删除旧内核（保留当前和最新）
- 清理系统日志
- 释放磁盘空间

```bash
# 功能包括
- /tmp 和 /var/tmp 临时文件清理
- 包管理器缓存清理
- 旧内核自动删除
- 系统日志轮转和清理
```

#### 👥 用户管理
- 列出可登录用户
- 创建新用户
- 删除用户（安全确认）
- 修改用户密码
- 查看用户组信息
- 安全的用户切换

#### 🔧 内核管理
- 查看当前内核版本
- 列出已安装内核
- 删除旧内核
- 检查内核更新
- CentOS 7 内核升级支持

### 2. 网络与安全工具

#### 🌐 网络速度测试
```bash
# 自动安装 speedtest-cli
# 测试项目:
- 网络延迟 (Ping)
- 下载速度 (Download)
- 上传速度 (Upload)
```

#### 📊 SSH登录日志分析
- 成功登录记录查看
- 失败登录记录分析
- 分页显示和搜索
- 实时监控SSH登录
- 自动解析用户、IP、时间

#### 🔥 防火墙管理
支持多种防火墙系统：

**UFW (Ubuntu/Debian 推荐)**
```bash
# 功能特性
- 查看防火墙状态
- 开放/关闭端口
- 启用/禁用防火墙
- 规则管理
```

**Firewalld (CentOS 推荐)**
```bash
# 高级功能
- 区域管理
- 服务管理
- 端口管理
- 富规则配置
```

#### ⚡ BBR网络加速
- BBR状态检查和诊断
- 一键开启/关闭BBR
- 内核版本兼容性检查
- CentOS 7 内核自动升级
- BBR高级参数调优

```bash
# BBR优化参数
net.core.default_qdisc=fq
net.ipv4.tcp_congestion_control=bbr
# 以及其他网络优化参数
```

#### 🔍 端口扫描
- 列出所有占用端口
- 显示进程信息
- 协议类型识别
- 常用端口说明

#### 🩺 网络诊断工具
- 网络接口信息
- 路由表查看  
- DNS配置检查
- 连通性测试

### 3. 一键换源加速

支持主流国内镜像源：

#### 🇨🇳 镜像源选项
- **阿里云镜像** (推荐)
- **腾讯云镜像**
- **中科大镜像**
- **清华大学镜像**
- **恢复官方源**

#### 📦 包管理器支持
- **APT** (Ubuntu/Debian)
- **YUM** (CentOS 7)
- **DNF** (CentOS 8)

#### 🛡️ 安全特性
- 自动备份原有源配置
- 失败时自动回滚
- 源可用性验证

### 4. 面板一键安装

#### 🎛️ 支持的面板

| 面板名称 | 适用场景 | 特点 |
|---------|---------|------|
| 宝塔面板 LTS版 | 生产环境 | 稳定可靠 |
| 宝塔面板最新版 | 新功能体验 | 功能最新 |
| 1Panel 国际版 | Docker环境 | 容器化管理 |
| 1Panel 国内版 | 企业用户 | 本土化支持 |
| aapanel | 国际用户 | 英文界面 |

#### 🚀 安装特性
- 网络连接检查
- 安装前确认
- 自动环境配置
- 安装状态监控

### 5. 第三方工具集成

#### 📡 sing-box-yg 脚本
- 一键安装代理工具
- 配置向导
- 多协议支持

### 6. 工具箱管理

#### 🔧 管理功能
- 安装/更新工具箱
- 卸载工具箱
- 版本信息查看
- 配置文件清理
- 运行统计

## 📸 界面预览

```
██╗     ██╗███╗   ██╗██╗   ██╗██╗  ██╗
██║     ██║████╗  ██║██║   ██║╚██╗██╔╝
██║     ██║██╔██╗ ██║██║   ██║ ╚███╔╝ 
██║     ██║██║╚██╗██║██║   ██║ ██╔██╗ 
███████╗██║██║ ╚████║╚██████╔╝██╔╝ ██╗
╚══════╝╚═╝╚═╝  ╚═══╝ ╚═════╝ ╚═╝  ╚═╝

╔═══════════════════════════════╗
       Linux工具箱 v2.0       
╚═══════════════════════════════╝

  运行模式: 已安装 (执行命令: tool)
  检测到系统: ubuntu
  运行次数: 15

1. 系统管理工具
2. 网络与安全工具  
3. 一键换源加速
4. 一键安装面板
5. 一键安装singbox-yg脚本
6. 工具箱管理
0. 退出
=============================================
请输入选项 [1-6]:
```

## 🔧 高级用法

### 命令行参数

```bash
# 显示版本信息
tool --version

# 显示帮助信息
tool --help

# 开启调试模式
DEBUG=1 tool
```

### 配置文件

工具箱配置存储在 `/etc/toolbox/` 目录：

```bash
/etc/toolbox/
├── config.cfg      # 主配置文件
└── counter         # 运行计数器
```

### 日志系统

工具箱内置分级日志系统：

```bash
[INFO]  正常操作信息
[WARN]  警告信息  
[ERROR] 错误信息
[DEBUG] 调试信息 (需开启DEBUG模式)
```

## 🛡️ 安全特性

### 权限管理
- 自动检测并请求root权限
- 安全的sudo提权机制
- 操作前权限验证

### 数据保护
- 配置文件自动备份
- 失败时自动回滚
- 重要操作二次确认

### 输入验证
- 参数类型检查
- 数值范围验证
- 特殊字符过滤
- 超时保护机制

### 错误处理
- 统一错误捕获机制
- 详细错误信息记录
- 自动清理临时文件
- 优雅的程序退出

## 🤝 贡献指南

欢迎贡献代码和建议！

### 开发环境

```bash
# 克隆仓库
git clone https://github.com/GamblerIX/linux-toolbox.git
cd linux-toolbox

# 运行测试
bash tool.sh --help
```

### 代码规范

- 使用4空格缩进
- 函数名使用下划线命名法
- 添加必要的注释
- 遵循Shell最佳实践

### 提交规范

```bash
# 功能添加
git commit -m "feat: 添加新功能描述"

# 问题修复  
git commit -m "fix: 修复问题描述"

# 文档更新
git commit -m "docs: 更新文档内容"
```

## 🐛 问题反馈

如果遇到问题，请通过以下方式反馈：

1. **GitHub Issues**: [提交问题](https://github.com/GamblerIX/linux-toolbox/issues)
2. **功能请求**: [功能建议](https://github.com/GamblerIX/linux-toolbox/issues/new?template=feature_request.md)

### 反馈时请提供

- 操作系统版本
- 错误信息截图
- 复现步骤描述
- 工具箱版本信息

## 📚 常见问题

### Q: 工具箱支持哪些系统？
A: 目前支持 Ubuntu 16.04+、Debian 9+、CentOS 7/8。

### Q: 是否需要root权限？
A: 是的，大部分功能需要root权限，脚本会自动请求提权。

### Q: 如何更新工具箱？
A: 运行工具箱后选择"工具箱管理" -> "安装/更新工具箱"。

### Q: 配置文件在哪里？
A: 配置文件存储在 `/etc/toolbox/` 目录。

### Q: 如何完全卸载？
A: 运行"工具箱管理" -> "卸载工具箱"，会删除所有相关文件。

### Q: BBR开启失败怎么办？
A: 检查内核版本是否支持（需要4.9+），CentOS 7用户可使用内置的内核升级功能。

## 📄 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件。

## 🙏 致谢

感谢以下项目和贡献者：

- [speedtest-cli](https://github.com/sivel/speedtest-cli) - 网络速度测试
- [宝塔面板](https://www.bt.cn/) - Web管理面板
- [1Panel](https://1panel.cn/) - 现代化管理面板
- 所有提供镜像源服务的机构

## 📊 项目信息

- **GitHub Stars**: 持续增长中
- **GitHub Forks**: 活跃的社区贡献
- **Issues**: 积极的问题处理
- **最后提交**: 持续维护更新

---

**项目地址**: https://github.com/GamblerIX/linux-toolbox

**一键运行**: `curl -Ls https://raw.githubusercontent.com/GamblerIX/linux-toolbox/main/tool.sh | bash`

如果这个工具对您有帮助，请给个 ⭐ Star 支持一下！